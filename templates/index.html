<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Pr√°ctica SQL Injection</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { max-width: 900px; margin: 0 auto; }
        .search-box { margin: 20px 0; padding: 20px; background: #f5f5f5; border-radius: 5px; }
        input[type="text"] { padding: 10px; width: 400px; margin-right: 10px; }
        input[type="submit"] { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .clear-btn { padding: 8px 15px; background: #6c757d; color: white; border: none; border-radius: 3px; cursor: pointer; text-decoration: none; display: inline-block; }
        .examples { background: #fffacd; padding: 15px; margin: 20px 0; border-left: 4px solid #ffeb3b; }
        .vulnerable { color: #d9534f; font-weight: bold; background: #f8d7da; padding: 10px; border-radius: 3px; }
        .results { margin: 30px 0; }
        .student-list { background: #e9f7ef; padding: 15px; border-radius: 5px; margin: 20px 0; }
        code { background: #f4f4f4; padding: 2px 5px; border-radius: 3px; font-family: monospace; }
        .initial-message { color: #666; font-style: italic; }
        .error { color: #d9534f; background: #f8d7da; padding: 10px; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîì Pr√°ctica de SQL Injection</h1>
       
        <div class="student-list">
            <h2>Integrantes del equipo:</h2>
            <ul>
                <li>Cordero Cruz Ian Alejandro</li>
                <li>Chapina de la Rosa Jose Antonio</li>
                <li>Avi√±a Dur√°n Ramses</li>
            </ul>
        </div>

        <div class="search-box">
            <h3>üîç B√∫squeda en la base de datos:</h3>
            <form method="post">
                <input type="text" name="search" value="{{ search_term }}" placeholder="Buscar por nombre...">
                <input type="submit" value="Buscar">
                {% if show_results %}
                    <a href="/clear" class="clear-btn">Limpiar B√∫squeda</a>
                {% endif %}
            </form>
        </div>

        {% if error %}
        <div class="error">
            <strong>Error:</strong> {{ error }}
        </div>
        {% endif %}

        <div class="examples">
            <h3>üéØ Ejemplos para probar SQL Injection:</h3>
            <ul>
                <li><code>' OR '1'='1</code> - Mostrar todos los registros</li>
                <li><code>admin' --</code> - Buscar solo admin</li>
                <li><code>' UNION SELECT 1,version(),'Sistema' --</code> - Ver versi√≥n PostgreSQL</li>
                <li><code>' UNION SELECT 2,current_database(),'BD' --</code> - Ver nombre de BD</li>
                <li><code>' UNION SELECT 3,table_name,'Tablas' FROM information_schema.tables --</code> - Listar tablas</li>
            </ul>
        </div>

        {% if show_results %}
        <div class="results">
            <h3>
                {% if search_term %}
                    Resultados para "{{ search_term }}":
                {% else %}
                    Todos los registros:
                {% endif %}
            </h3>
           
            {% if rows %}
                <ul>
                    {% for id, nombre, descripcion in rows %}
                        <li><strong>{{ id }}</strong> ‚Äî {{ nombre }}: {{ descripcion }}</li>
                    {% endfor %}
                </ul>
                <p>Total: {{ rows|length }} registros</p>
            {% else %}
                <p>No se encontraron resultados para "{{ search_term }}"</p>
            {% endif %}
        </div>
        {% else %}
        <div class="results">
            <h3>üîç Busca en la base de datos</h3>
            <p class="initial-message">Ingresa un t√©rmino de b√∫squeda para ver los registros</p>
        </div>
        {% endif %}

        <div class="vulnerable">
            ‚ö†Ô∏è ADVERTENCIA: Esta aplicaci√≥n es vulnerable a SQL Injection - Solo para fines educativos
        </div>
    </div>
</body>
</html>
